<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pullit 온보딩 가이드</title>
    <link rel="stylesheet" href="/css/main.css">
    <script src="https://unpkg.com/vue@3"></script>
    <script type="module">
        // 1. Mermaid 코어 라이브러리 임포트
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.esm.min.mjs';
        
        // 2. ELK 레이아웃 엔진 임포트
        import elkLayouts from 'https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@latest/dist/mermaid-layout-elk.esm.min.mjs';

        // 3. Mermaid에 ELK 레이아웃 엔진 등록
        mermaid.registerLayoutLoaders(elkLayouts);

        // 4. Mermaid 초기화 (ELK 옵션 포함)
        window.mermaid = mermaid;
        mermaid.initialize({
          startOnLoad: false,
          theme: 'default',
          layout: 'elk',
          elk: {
            nodePlacementStrategy: 'LINEAR_SEGMENTS'
          },
          er: {
            layoutDirection: 'TB'
          }
        });
    </script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script>
</head>
<body>
    <div id="app" class="onboarding-page">
        <!-- Modern Floating Action Button -->
        <div class="fab-container">
            <div class="fab-menu" :class="{ show: isFabExpanded }">
                <a href="/redoc.html" class="fab-item">
                    <i data-lucide="file-text"></i>
                    API 문서
                </a>
                <a href="/" class="fab-item">
                    <i data-lucide="home"></i>
                    홈으로
                </a>
            </div>
            <button class="fab-main" :class="{ expanded: isFabExpanded }" @click="toggleFab">
                <i data-lucide="plus"></i>
            </button>
        </div>

        <!-- Page Layout Grid -->
        <div class="page-layout" :class="{ 'sidebar-collapsed': isSidebarCollapsed }">
            <!-- Sidebar Navigation -->
            <aside class="sidebar-nav" :class="{ collapsed: isSidebarCollapsed }">
                <div class="nav-header">
                    <h2>Pullit 온보딩 가이드</h2>
                    <button class="sidebar-toggle" @click="toggleSidebar" :title="isSidebarCollapsed ? '사이드바 펼치기' : '사이드바 접기'">
                        <i class="chevron-left" data-lucide="chevron-left"></i>
                        <i class="chevron-right" data-lucide="chevron-right"></i>
                    </button>
                </div>
                <div v-for="menu in navigation" class="nav-section" :key="menu.name">
                    <button class="nav-section-title" @click="handleSectionClick(menu.name)">
                        <div class="section-title-content">
                            <i :data-lucide="menu.icon"></i>
                            <span>{{ menu.name }}</span>
                        </div>
                        <i class="chevron" :data-lucide="isSectionCollapsed(menu.name) ? 'chevron-right' : 'chevron-down'"></i>
                    </button>
                    <div class="nav-section-icon" :title="menu.name">
                        <i :data-lucide="menu.icon"></i>
                    </div>
                    <div class="nav-items" :class="{ collapsed: isSectionCollapsed(menu.name) }">
                        <a v-for="item in menu.items" 
                           :key="item.id"
                           :href="'#' + item.id" 
                           class="nav-item"
                           :class="{ active: activeSection === item.id }"
                           @click.prevent="showSection(item.id)">
                            <i :data-lucide="item.icon"></i>
                            <span>{{ item.title }}</span>
                        </a>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content" :class="{ 'sidebar-collapsed': isSidebarCollapsed }">
                <div class="content-container">
                    <section v-for="(section, id) in sections" :key="id" :id="id" class="content-section" :class="{ active: activeSection === id }">
                        <div class="content-card">
                            <h3>{{ section.title }}</h3>
                            <div v-if="section.markdown" v-html="renderMarkdown(section.markdown)"></div>
                            <div v-else-if="section.html" v-html="section.html"></div>
                        </div>
                    </section>
                </div>
            </main>
        </div>

        <!-- Mobile Navigation Toggle -->
        <button class="mobile-nav-toggle" @click="toggleMobileSidebar">
            <i data-lucide="menu"></i>
        </button>

        <!-- Mobile Sidebar Overlay -->
        <div class="mobile-sidebar-overlay" :class="{ show: isMobileSidebarOpen }" @click="closeMobileSidebar"></div>
        
        <!-- Mobile Sidebar -->
        <aside class="mobile-sidebar" :class="{ show: isMobileSidebarOpen }">
            <div class="nav-header">
                <h2>Pullit 온보딩 가이드</h2>
            </div>
            <div v-for="menu in navigation" class="nav-section" :key="menu.name">
                <h4 class="nav-section-title">
                    <i :data-lucide="menu.icon"></i>
                    {{ menu.name }}
                </h4>
                <a v-for="item in menu.items" 
                   :key="item.id"
                   :href="'#' + item.id" 
                   class="nav-item"
                   :class="{ active: activeSection === item.id }"
                   @click.prevent="showSection(item.id); closeMobileSidebar()">
                    <i :data-lucide="item.icon"></i>
                    {{ item.title }}
                </a>
            </div>
        </aside>
        
    </div>

    <script src="/js/onboarding.js" defer></script>
</body>
</html>
